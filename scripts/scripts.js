"use strict";angular.module("cool",["ngAnimate","ngResource","ui.router"]),angular.module("cool").directive("board",function(){return{templateUrl:"scripts/board/board-d.html",restrict:"E"}}),angular.module("cool").directive("card",function(){return{templateUrl:"scripts/card/card-d.html",restrict:"EA"}}),angular.module("cool").directive("debug",function(){return{restrict:"E",transclude:!0,template:'<ng-transclude ng-if="$root.debug"></ng-transclude>'}}),angular.module("cool").factory("Api",["$state","State","$window","Models",function(e,o,t,a){var r={nextPlayer:function(e){o.players[e+1]?(r.message({text:"moving on",header:"Next Player "+o.players[e+1].playerName}),o.turn=o.players[e+1]):(r.message({text:"moving on",header:"Next Player "+o.players[0].playerName}),o.turn=o.players[0])},rollDice:function(){var e=0,t=!1,a=Math.floor(6*Math.random())+1;o.dice[0]=a;var l=Math.floor(6*Math.random())+1;return o.dice[1]=l,a===l?t=!0:null,e=a+l,o.currentRoll=e,r.message({header:o.turn.playerName+" Rolls ",text:o.dice}),{total:e,doubles:t}},startGame:function(a){o.players=[];for(var l={},n={},s=0;a>s;s++){console.log("startGame() - get names",s);var i=t.prompt("What is player "+(s+1)+"'s name?");o.players.push({playerName:i,currentPosition:1})}angular.forEach(o.players,function(e,o){console.info(o,e);var t=r.rollDice().total;if(console.info(n[t]),n[t]){for(var a=r.rollDice().total;n[a];)console.error("Tied! Rolling Again"),console.info("player "+e.playerName+" has rolled the same and will now re-roll"),a=r.rollDice().total;n[a]=e.playerName,l[e.playerName]=a}else console.info(e.playerName+" has rolled "+t),n[t]=e.playerName,l[e.playerName]=t}),console.log(l);var c=[],u=[];angular.forEach(l,function(e,o){c.push(e)}),c.sort(function(e,o){return e-o}),angular.forEach(c,function(e){u.unshift({currentPosition:1,playerName:n[e]})}),console.log("%c",u,"color:#00ff00");var g=["lightPurple","lightOrange","lightBlue","lightGreen","lightYellow","lightPink","pink"];angular.forEach(u,function(e){var o=Math.floor(Math.random()*(g.length-1));e.color=g[o],g.splice(o,1)}),o.players=u,o.turn=u[0],console.log("%c Game ready to begin. Player "+u[0].playerName+" goes first.","font-size:2em"),r.message({text:u[0].playerName+" goes first.",header:"Game ready to begin."}),e.go("cool.board"),o.gameStarted=!0},takeTurn:function(e,l){r.message({header:l.playerName+" takes a turn.",text:"Rolling..."}),o.messages={};var n=!1,s=r.rollDice();if("number"!=typeof l.currentPosition)return console.log("not a number"),void(s.doubles?l.currentPosition=1:r.nextPlayer(e));var i=!0;l.currentPosition-s.total>0&&(i=t.confirm(l.playerName+" rolled "+s.total+". Press OK to move forward. CANCEL to move backwards"),console.log(i)),l.currentPosition=i===!0?l.currentPosition+s.total:l.currentPosition-s.total,"cool?"===a.spaces[l.currentPosition]?(r.card(e),n=!0):"trap"===a.spaces[l.currentPosition]?(console.log("Its a trap!!"),r.message({text:"Oh no, "+l.playerName+" sent back to start!",header:"It's a trap!!"}),r.goHome(l)):null,s.doubles===!0?(console.log("player "+l.playerName+" goes again."),r.message({text:l.playerName+" goes again.",header:"Doubles!!"})):(r.message({text:"next player is up.",header:l.playerName+"s turn is over"}),n?null:r.nextPlayer(e))},message:function(e){console.info(e.header,e.text);var t=Date.now();o.messages[t]={text:e.text,header:e.header,type:e.type,expires:t+e.duration}},card:function(){r.message({header:"Getting card",text:"Is it cool?"});var e=a.cards[Math.floor(Math.random()*a.cards.length)];o.card=e},goHome:function(e){r.message({header:"Going home",text:e.playerName+"Is it cool?"}),e.currentPosition=1},killPlayer:function(e){var t=o.players.indexOf(e);r.message({text:"Rough, son. Better luck on the next one",header:o.players[t].playerName+"is dead."}),r.nextPlayer(o.players.indexOf(e)),o.players.splice(t,1)},goPass:function(e){for(console.log("getting a pass, ya baby!!"),r.message({text:"Getting a pass, finishing fast!!",header:e.playerName+" is lucky."});"pass"!==a.spaces[e.currentPosition];)e.currentPosition=e.currentPosition+1;r.nextPlayer(o.players.indexOf(e))},goJail:function(e){r.message({text:"Getting sent to jail sucks, too bad now you're stuck!!",header:e.playerName+" is locked-up."}),e.currentPosition="jail",r.nextPlayer(o.players.indexOf(e))},goSchool:function(e){r.message({text:"Smarten up, level up",header:e.playerName+" is getting schooled."}),e.currentPosition="school",r.nextPlayer(o.players.indexOf(e))},goWork:function(e){r.message({text:"An empty wallet will get you nowhere fast",header:e.playerName+" gone broke!!"}),e.currentPosition="work",r.nextPlayer(o.players.indexOf(e))}};return r}]),angular.module("cool").factory("Models",function(){var e="",o=0,t=[],a={red:"rgba(180, 23, 2, 1)",blue:"rgba(1, 19, 108, 1)",yellow:"rgba(255, 203, 0, 1)",black:"rgba(0,1,2,1)",lightPurple:"rgba(119, 68, 150, 1)",lightOrange:"rgba(255, 87, 34, 1)",lightBlue:"rgba(0, 87, 171, 1)",lightGreen:"rgba(0, 234, 0, 1)",lightYellow:"rgba(255, 251, 0, 1)",lightPink:"rgba(255, 184, 191, 1)",pink:"rgba(255, 43, 106, 1)"},r={player:{name:e,currentPosition:o,color:e},message:{text:e,header:e,type:e,duration:o},card:{topText:[],bottomText:[],action:e,image:e},cards:[{topText:["You went to college","To be a boss","Then paid the cost","To be the boss"],bottomText:["That's cool!","You can go to pass"],action:"goPass",background:"green"},{topText:["You applied for a job","And got hired","They said you can work there","Until you retire!"],bottomText:["That's cool!","Go to pass"],action:"goPass",background:"green"},{topText:["You joined a gang and got shot and died. Then your family cried!"],bottomText:["That's not cool!","You're out of the game!","Sorry!"],action:"killPlayer",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/US_Capitol_Building_at_night_Jan_2006.jpg/1018px-US_Capitol_Building_at_night_Jan_2006.jpg"},{topText:["Locked in the can."],bottomText:["jailin"],action:"goJail",image:"http://www.liberalamerica.org/wp-content/uploads/2015/03/e15243d5-58a2-4215-8989-0d666bbb07d6.jpg"},{topText:["Locked in the can."],bottomText:["schoolin"],action:"goSchool",image:"https://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&cad=rja&uact=8&ved=0ahUKEwjX4Ji27pvKAhVK5WMKHdKlCl4QjRwIBw&url=http%3A%2F%2Fwww.englishinbritain.co.uk%2Fschool_detail.cfm%3Fschoolid%3D421&bvm=bv.111396085,d.cGc&psig=AFQjCNGI9S-76H1wjc9C80PgZYGiFSy1oA&ust=1452399090198131"},{topText:["Locked in the can."],bottomText:["workin"],action:"goWork",image:"https://pixabay.com/static/uploads/photo/2014/07/05/10/31/work-384745_640.jpg"}],spaces:{school:"school",work:"work",jail:"jail",1:a.blue,2:a.yellow,3:a.black,4:a.red,5:"cool?",6:a.blue,7:a.yellow,8:a.black,9:"cool?",10:a.red,11:a.blue,12:a.black,13:a.yellow,14:"cool?",15:a.black,16:a.yellow,17:"pass",18:a.black,19:a.red,20:"cool?",21:a.yellow,22:a.black,23:"cool?",24:a.blue,25:a.red,26:a.yellow,27:a.blue,28:"cool?",29:a.black,30:a.yellow,31:a.red,32:"pass",33:a.blue,34:"cool?",35:a.black,36:a.yellow,37:"cool?",38:a.yellow,39:a.blue,40:a.black,41:a.red,42:"cool?",43:a.blue,44:a.yellow,45:a.red,46:"cool?",47:a.black,48:"trap",49:"sunglasses",50:"pass",51:a.yellow,52:a.black,53:a.red,54:"cool?",55:a.blue,56:a.yellow,57:"trap",58:"win"},sections:{timeouts:["school","work","jail"],c:[1,2,3,4,5,6,7,8,9,10],o1:[11,12,13,14,15,16,17,18,19,20,21,22,23],gap1:[24],o2:[25,26,27,28,29,30,31,32,33,34,35,36,37],gap2:[38,39,40],l:[41,42,43,44,45,46,47,48],sunglasses:[49],question:[50,51,52,53,54,55,56,57],win:[58]},start:{players:o,colors:t,text:e},dice:[o,o],colors:a};return r}),angular.module("cool").factory("Rules",["State",function(e){var o={turnLogic:function(o,t,a){e.players[key+1]?e.turn=e.players[key+1]:e.turn=e.players[0]},cardLogic:function(){},winLogic:function(){}};return o}]),angular.module("cool").factory("State",function(){var e={turn:"",gameStarted:!1,players:[],messages:{},dice:[],card:{}};return e}),angular.module("cool").directive("messages",function(){return{templateUrl:"scripts/messages/messages-d.html",restrict:"EA"}}),angular.module("cool").config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("cool",{url:"/",template:"<start></start>",controller:coolCtrl,controllerAs:"cool"}).state("cool.board",{url:"board",template:"<board></board>"}).state("cool.board.space",{url:"/:space",template:"Space: Is it cool?"}).state("cool.cards",{url:"cards",template:"Cards: Is it cool?<ui-view></ui-view>"}).state("cool.cards.card",{url:"/:card",template:"Card: Is it cool?"})}]);var coolCtrl=function(e,o,t,a){var r=this;r.di={state:e,rules:o,api:t,models:a},r.cool="very"};coolCtrl.$inject=["State","Rules","Api","Models"],angular.module("cool").directive("start",function(){return{templateUrl:"scripts/start/start-d.html",restrict:"E"}});