"use strict";angular.module("cool",["ngAnimate","ngResource","ui.router"]),angular.module("cool").directive("board",function(){return{templateUrl:"scripts/board/board-d.html",restrict:"E"}}),angular.module("cool").directive("card",function(){return{templateUrl:"scripts/card/card-d.html",restrict:"EA"}}),angular.module("cool").directive("debug",function(){return{restrict:"E",transclude:!0,template:'<ng-transclude ng-if="$root.debug"></ng-transclude>'}}),angular.module("cool").factory("Api",["$state","State","$window","Models",function(e,o,a,t){var r={rollDice:function(){var e=0,a=!1,t=Math.floor(6*Math.random())+1;o.dice[0]=t;var r=Math.floor(6*Math.random())+1;return o.dice[1]=r,e=t+r,o.currentRoll=e,{total:e,doubles:a}},startGame:function(t){o.players=[];for(var l={},n={},s=0;t>s;s++){console.log("startGame() - get names",s);var c=a.prompt("What is player "+(s+1)+"'s name?");o.players.push({playerName:c,currentPosition:1})}angular.forEach(o.players,function(e,o){console.info(o,e);var a=r.rollDice().total;if(console.info(n[a]),n[a]){for(var t=r.rollDice().total;n[t];)console.error("Tied! Rolling Again"),console.info("player "+e.playerName+" has rolled the same and will now re-roll"),t=r.rollDice().total;n[t]=e.playerName,l[e.playerName]=t}else console.info(e.playerName+" has rolled "+a),n[a]=e.playerName,l[e.playerName]=a}),console.log(l);var i=[],u=[];angular.forEach(l,function(e,o){i.push(e)}),i.sort(function(e,o){return e-o}),angular.forEach(i,function(e){u.unshift({currentPosition:1,playerName:n[e]})}),console.log("%c",u,"color:#00ff00");var g=["lightPurple","lightOrange","lightBlue","lightGreen","lightYellow","lightPink","pink"];angular.forEach(u,function(e){var o=Math.floor(Math.random()*(g.length-1));e.color=g[o],g.splice(o,1)}),o.players=u,o.turn=u[0],console.log("%c Game ready to begin. Player "+u[0].playerName+" goes first.","font-size:2em"),r.message({text:u[0].playerName+" goes first.",header:"Game ready to begin."}),e.go("cool.board"),o.gameStarted=!0},takeTurn:function(e,l){o.messages={};var n=r.rollDice();"timeout"===l.currentPosition;var s=!0;l.currentPosition-n.total>0&&(s=a.confirm(l.playerName+" rolled "+n.total+". Press OK to move forward. CANCEL to move backwards"),console.log(s)),l.currentPosition=s===!0?l.currentPosition+n.total:l.currentPosition-n.total,"cool?"===t.spaces[l.currentPosition]?r.card():"trap"===t.spaces[l.currentPosition]?(console.log("Its a trap!!"),r.message({text:"Oh no, "+l.playerName+" sent back to start!",header:"It's a trap!!"}),r.goHome(l)):null,n.doubles===!0?(console.log("player "+l.playerName+" goes again."),r.message({text:l.playerName+" goes again.",header:"Doubles!!"})):o.players[e+1]?o.turn=o.players[e+1]:o.turn=o.players[0]},message:function(e){console.info("messaging",e);var a=Date.now();o.messages[a]={text:e.text,header:e.header,type:e.type,expires:a+e.duration}},card:function(){console.log("%c cards","background: cream");var e=t.cards[Math.floor(Math.random()*t.cards.length)];o.card=e},goHome:function(e){e.currentPosition=1},killPlayer:function(e){console.log(e.playerName,"dead"),r.message({text:"Rough, son. Better luck on the next one",header:e.playerName+"is dead."}),o.players.splice(o.players.indexOf(e),1)},goPass:function(e){console.log("getting a pass, ya baby!!"),r.message({text:"Getting a pass, finishing fast!!",header:e.playerName+" is lucky."})},goJail:function(e){console.log("going to jail, no baby!!"),r.message({text:"Getting sent to jail sucks, too bad now you're stuck!!",header:e.playerName+" is locked-up."}),e.currentPosition="jail"},goSchool:function(e){console.log("back to school, learnin lessons baby!!"),r.message({text:"Smarten up, level up",header:e.playerName+" is getting schooled."}),e.currentPosition="school"},goWork:function(e){console.log("gotta work, life ain't free!"),r.message({text:"An empty wallet will get you nowhere fast",header:e.playerName+" gone broke!!"}),e.currentPosition="work"}};return r}]),angular.module("cool").factory("Models",function(){var e="",o=0,a=[],t={red:"rgba(180, 23, 2, 1)",blue:"rgba(1, 19, 108, 1)",yellow:"rgba(255, 203, 0, 1)",black:"rgba(0,1,2,1)",lightPurple:"rgba(119, 68, 150, 1)",lightOrange:"rgba(255, 87, 34, 1)",lightBlue:"rgba(0, 87, 171, 1)",lightGreen:"rgba(0, 234, 0, 1)",lightYellow:"rgba(255, 251, 0, 1)",lightPink:"rgba(255, 184, 191, 1)",pink:"rgba(255, 43, 106, 1)"},r={player:{name:e,currentPosition:o,color:e},message:{text:e,header:e,type:e,duration:o},card:{topText:[],bottomText:[],action:e,image:e},cards:[{topText:["You went to college","To be a boss","Then paid the cost","To be the boss"],bottomText:["That's cool!","You can go to pass"],action:"goPass",background:"green"},{topText:["You applied for a job","And got hired","They said you can work there","Until you retire!"],bottomText:["That's cool!","Go to pass"],action:"goPass",background:"green"},{topText:["You joined a gang and got shot and died. Then your family cried!"],bottomText:["That's not cool!","You're out of the game!","Sorry!"],action:"killPlayer",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/US_Capitol_Building_at_night_Jan_2006.jpg/1018px-US_Capitol_Building_at_night_Jan_2006.jpg"}],spaces:{school:"timeout",work:"timeout",jail:"timeout",1:t.blue,2:t.yellow,3:t.black,4:t.red,5:"cool?",6:t.blue,7:t.yellow,8:t.black,9:"cool?",10:t.red,11:t.blue,12:t.black,13:t.yellow,14:"cool?",15:t.black,16:t.yellow,17:"pass",18:t.black,19:t.red,20:"cool?",21:t.yellow,22:t.black,23:"cool?",24:t.blue,25:t.red,26:t.yellow,27:t.blue,28:"cool?",29:t.black,30:t.yellow,31:t.red,32:"pass",33:t.blue,34:"cool?",35:t.black,36:t.yellow,37:"cool?",38:t.yellow,39:t.blue,40:t.black,41:t.red,42:"cool?",43:t.blue,44:t.yellow,45:t.red,46:"cool?",47:t.black,48:"trap",49:"sunglasses",50:"pass",51:t.yellow,52:t.black,53:t.red,54:"cool?",55:t.blue,56:t.yellow,57:"trap",58:"win"},sections:{c:[1,2,3,4,5,6,7,8,9,10],o1:[11,12,13,14,15,16,17,18,19,20,21,22,23],gap1:[24],o2:[25,26,27,28,29,30,31,32,33,34,35,36,37],gap2:[38,39,40],l:[41,42,43,44,45,46,47,48],sunglasses:[49],question:[50,51,52,53,54,55,56,57],win:[58]},start:{players:o,colors:a,text:e},dice:[o,o],colors:t};return r}),angular.module("cool").factory("Rules",["State",function(e){var o={moveLogic:function(e,o,a){},cardLogic:function(){},winLogic:function(){}};return o}]),angular.module("cool").factory("State",function(){var e={turn:"",gameStarted:!1,players:[],messages:{},dice:[],card:{}};return e}),angular.module("cool").directive("messages",function(){return{templateUrl:"scripts/messages/messages-d.html",restrict:"EA"}}),angular.module("cool").config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("cool",{url:"/",template:"<start></start>",controller:coolCtrl,controllerAs:"cool"}).state("cool.board",{url:"board",template:"<board></board>"}).state("cool.board.space",{url:"/:space",template:"Space: Is it cool?"}).state("cool.cards",{url:"cards",template:"Cards: Is it cool?<ui-view></ui-view>"}).state("cool.cards.card",{url:"/:card",template:"Card: Is it cool?"})}]);var coolCtrl=function(e,o,a,t){var r=this;r.di={state:e,rules:o,api:a,models:t},r.cool="very"};coolCtrl.$inject=["State","Rules","Api","Models"],angular.module("cool").directive("start",function(){return{templateUrl:"scripts/start/start-d.html",restrict:"E"}});